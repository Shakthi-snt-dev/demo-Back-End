2025-11-29 21:05:56.255 +05:30 [INF] User profile is available. Using 'C:\Users\Rajan\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-29 21:05:56.644 +05:30 [WRN] The WebRootPath was not found: D:\Git\demo-Back-End\Flowtap_Presentation\wwwroot. Static files may be unavailable.
2025-11-29 21:05:56.757 +05:30 [INF] Now listening on: http://localhost:5113
2025-11-29 21:05:56.762 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-11-29 21:05:56.766 +05:30 [INF] Hosting environment: Development
2025-11-29 21:05:56.768 +05:30 [INF] Content root path: D:\Git\demo-Back-End\Flowtap_Presentation
2025-11-29 21:08:08.767 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5113/swagger/index.html - null null
2025-11-29 21:08:09.157 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5113/swagger/index.html - 200 null text/html;charset=utf-8 394.1958ms
2025-11-29 21:08:09.326 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5113/swagger/v1/swagger.json - null null
2025-11-29 21:08:10.032 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5113/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 706.8478ms
2025-11-29 21:08:41.588 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5113/api/Auth/login - application/json 66
2025-11-29 21:08:41.631 +05:30 [WRN] Failed to determine the https port for redirect.
2025-11-29 21:08:41.651 +05:30 [INF] CORS policy execution successful.
2025-11-29 21:08:41.932 +05:30 [INF] Executing endpoint 'Flowtap_Presentation.Controllers.AuthController.Login (Flowtap_Presentation)'
2025-11-29 21:08:42.020 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Flowtap_Application.DtoModel.ApiResponseDto`1[Flowtap_Application.DtoModel.Response.LoginResponseDto]]] Login(Flowtap_Application.DtoModel.Request.LoginRequestDto) on controller Flowtap_Presentation.Controllers.AuthController (Flowtap_Presentation).
2025-11-29 21:08:46.555 +05:30 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-11-29 21:08:46.755 +05:30 [WRN] The property 'AppUser.StoreIds' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-11-29 21:08:46.762 +05:30 [WRN] The property 'Store.EmployeeIds' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-11-29 21:08:48.985 +05:30 [INF] Executed DbCommand (127ms) [Parameters=[@__email_0='testflowtap@yopmail.com'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AppUserId", u."CreatedAt", u."Email", u."EmailVerificationToken", u."EmailVerificationTokenExpiry", u."EmployeeId", u."ExternalProvider", u."ExternalProviderId", u."IsActive", u."IsEmailVerified", u."LastLoginAt", u."PasswordHash", u."PasswordSalt", u."TwoFactorEnabled", u."UpdatedAt", u."UserType", u."Username"
FROM "UserAccounts" AS u
WHERE u."Email" = @__email_0
LIMIT 1
2025-11-29 21:08:49.667 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p17='9e4c1d17-14c1-4e4e-81d1-17bd0657fde2', @p0='4c9abb05-d1e9-4fc7-928d-225f2c687ce2' (Nullable = true), @p1='2025-11-21T04:18:55.1076720Z' (DbType = DateTime), @p2='testflowtap@yopmail.com' (Nullable = false), @p3=NULL, @p4=NULL (DbType = DateTime), @p5='e60b7257-5782-4fcd-98f2-8f2636f0c5bd' (Nullable = true), @p6=NULL, @p7=NULL, @p8='True', @p9='True', @p10='2025-11-29T15:38:49.3750617Z' (Nullable = true) (DbType = DateTime), @p11='2iq6QxI7/tSlDD0TYAvFlc50//3XJCciHQXNh3KAotg=' (Nullable = false), @p12='X5tbMrzbtaL6pKpauGSVhw==', @p13='False', @p14='2025-11-29T15:38:49.3751808Z' (DbType = DateTime), @p15='1', @p16='Flowtap'], CommandType='"Text"', CommandTimeout='30']
UPDATE "UserAccounts" SET "AppUserId" = @p0, "CreatedAt" = @p1, "Email" = @p2, "EmailVerificationToken" = @p3, "EmailVerificationTokenExpiry" = @p4, "EmployeeId" = @p5, "ExternalProvider" = @p6, "ExternalProviderId" = @p7, "IsActive" = @p8, "IsEmailVerified" = @p9, "LastLoginAt" = @p10, "PasswordHash" = @p11, "PasswordSalt" = @p12, "TwoFactorEnabled" = @p13, "UpdatedAt" = @p14, "UserType" = @p15, "Username" = @p16
WHERE "Id" = @p17;
2025-11-29 21:08:49.865 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='4c9abb05-d1e9-4fc7-928d-225f2c687ce2'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."BusinessName", a."Country", a."CreatedAt", a."Currency", a."DefaultStoreId", a."Email", a."FirstName", a."Language", a."LastName", a."PhoneNumber", a."StoreIds", a."SubscriptionId", a."TimeZone", a."TrialEndDate", a."TrialStartDate", a."TrialStatus", a."UpdatedAt", a."City", a."PostalCode", a."State", a."StreetName", a."StreetNumber"
FROM "AppUsers" AS a
WHERE a."Id" = @__id_0
LIMIT 1
2025-11-29 21:08:50.216 +05:30 [INF] Successful login for email: testflowtap@yopmail.com, UserId: "9e4c1d17-14c1-4e4e-81d1-17bd0657fde2"
2025-11-29 21:08:50.255 +05:30 [INF] Executing OkObjectResult, writing value of type 'Flowtap_Application.DtoModel.ApiResponseDto`1[[Flowtap_Application.DtoModel.Response.LoginResponseDto, Flowtap_Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 21:08:50.368 +05:30 [INF] Executed action Flowtap_Presentation.Controllers.AuthController.Login (Flowtap_Presentation) in 8335.0227ms
2025-11-29 21:08:50.375 +05:30 [INF] Executed endpoint 'Flowtap_Presentation.Controllers.AuthController.Login (Flowtap_Presentation)'
2025-11-29 21:08:50.423 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5113/api/Auth/login - 200 null application/json; charset=utf-8 8834.7721ms
2025-11-29 21:10:21.049 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5113/api/Products - application/json 648
2025-11-29 21:10:21.080 +05:30 [INF] CORS policy execution successful.
2025-11-29 21:10:21.094 +05:30 [INF] Executing endpoint 'Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation)'
2025-11-29 21:10:21.167 +05:30 [INF] Route matched with {action = "CreateProduct", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Flowtap_Application.DtoModel.ApiResponseDto`1[Flowtap_Application.DtoModel.Response.ProductResponseDto]]] CreateProduct(Flowtap_Application.DtoModel.Request.CreateProductRequestDto) on controller Flowtap_Presentation.Controllers.ProductsController (Flowtap_Presentation).
2025-11-29 21:10:21.243 +05:30 [INF] Authorization failed for the request at filter 'Flowtap_Presentation.Attributes.AppUserOrOwnerAttribute'.
2025-11-29 21:10:21.249 +05:30 [INF] Executing UnauthorizedObjectResult, writing value of type '<>f__AnonymousType0`2[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-29 21:10:21.283 +05:30 [INF] Executed action Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation) in 77.2147ms
2025-11-29 21:10:21.286 +05:30 [INF] Executed endpoint 'Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation)'
2025-11-29 21:10:21.288 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5113/api/Products - 401 null application/json; charset=utf-8 239.019ms
2025-11-29 21:10:39.271 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5113/api/Products - application/json 648
2025-11-29 21:10:39.279 +05:30 [INF] CORS policy execution successful.
2025-11-29 21:10:39.483 +05:30 [INF] Executing endpoint 'Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation)'
2025-11-29 21:10:39.487 +05:30 [INF] Route matched with {action = "CreateProduct", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Flowtap_Application.DtoModel.ApiResponseDto`1[Flowtap_Application.DtoModel.Response.ProductResponseDto]]] CreateProduct(Flowtap_Application.DtoModel.Request.CreateProductRequestDto) on controller Flowtap_Presentation.Controllers.ProductsController (Flowtap_Presentation).
2025-11-29 21:10:39.573 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='9e4c1d17-14c1-4e4e-81d1-17bd0657fde2'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AppUserId", u."CreatedAt", u."Email", u."EmailVerificationToken", u."EmailVerificationTokenExpiry", u."EmployeeId", u."ExternalProvider", u."ExternalProviderId", u."IsActive", u."IsEmailVerified", u."LastLoginAt", u."PasswordHash", u."PasswordSalt", u."TwoFactorEnabled", u."UpdatedAt", u."UserType", u."Username"
FROM "UserAccounts" AS u
WHERE u."Id" = @__id_0
LIMIT 1
2025-11-29 21:10:39.654 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='e60b7257-5782-4fcd-98f2-8f2636f0c5bd'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."AccessPinHash", e."AvatarUrl", e."CanSwitchRole", e."CreatedAt", e."Email", e."EmergencyContactName", e."EmergencyContactPhone", e."EmployeeCode", e."FullName", e."HourlyRate", e."IsActive", e."LinkedAppUserId", e."Role", e."StoreId", e."UpdatedAt", e."City", e."PostalCode", e."State", e."StreetName", e."StreetNumber"
FROM "Employees" AS e
WHERE e."Id" = @__id_0
LIMIT 1
2025-11-29 21:10:40.139 +05:30 [INF] Executed DbCommand (28ms) [Parameters=[@__sku_0='string'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Brand", t."CategoryId", t."Condition", t."CostPrice", t."CreatedAt", t."Description", t."InventoryValuationMethod", t."IsActive", t."MinimumPrice", t."Name", t."ProductType", t."SKU", t."SalePrice", t."ShowOnPOS", t."SubCategoryId", t."SupplierId", t."TaxClass", t."TrackSerials", t."Id0", t."Name0", t."Id1", t."CategoryId0", t."Name1", p2."Id", p2."AttributeName", p2."AttributeValue", p2."ProductId"
FROM (
    SELECT p."Id", p."Brand", p."CategoryId", p."Condition", p."CostPrice", p."CreatedAt", p."Description", p."InventoryValuationMethod", p."IsActive", p."MinimumPrice", p."Name", p."ProductType", p."SKU", p."SalePrice", p."ShowOnPOS", p."SubCategoryId", p."SupplierId", p."TaxClass", p."TrackSerials", p0."Id" AS "Id0", p0."Name" AS "Name0", p1."Id" AS "Id1", p1."CategoryId" AS "CategoryId0", p1."Name" AS "Name1"
    FROM "Products" AS p
    LEFT JOIN "ProductCategories" AS p0 ON p."CategoryId" = p0."Id"
    LEFT JOIN "ProductSubCategories" AS p1 ON p."SubCategoryId" = p1."Id"
    WHERE p."SKU" = @__sku_0
    LIMIT 1
) AS t
LEFT JOIN "ProductVariants" AS p2 ON t."Id" = p2."ProductId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-11-29 21:10:40.385 +05:30 [ERR] Failed executing DbCommand (28ms) [Parameters=[@p0='932b66cf-f892-4b8f-a657-a360274567ad', @p1='string', @p2='3fa85f64-5717-4562-b3fc-2c963f66afa6' (Nullable = true), @p3='string', @p4='0', @p5='2025-11-29T15:40:40.1563746Z' (DbType = DateTime), @p6='string', @p7='string', @p8='True', @p9='0', @p10='string' (Nullable = false), @p11='0', @p12='string', @p13='0', @p14='True', @p15='3fa85f64-5717-4562-b3fc-2c963f66afa6' (Nullable = true), @p16='3fa85f64-5717-4562-b3fc-2c963f66afa6' (Nullable = true), @p17='string', @p18='True'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Products" ("Id", "Brand", "CategoryId", "Condition", "CostPrice", "CreatedAt", "Description", "InventoryValuationMethod", "IsActive", "MinimumPrice", "Name", "ProductType", "SKU", "SalePrice", "ShowOnPOS", "SubCategoryId", "SupplierId", "TaxClass", "TrackSerials")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-11-29 21:10:40.452 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'Flowtap_Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "Products" violates foreign key constraint "FK_Products_ProductCategories_CategoryId"

DETAIL: Key (CategoryId)=(3fa85f64-5717-4562-b3fc-2c963f66afa6) is not present in table "ProductCategories".
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "Products" violates foreign key constraint "FK_Products_ProductCategories_CategoryId"
    Detail: Key (CategoryId)=(3fa85f64-5717-4562-b3fc-2c963f66afa6) is not present in table "ProductCategories".
    SchemaName: public
    TableName: Products
    ConstraintName: FK_Products_ProductCategories_CategoryId
    File: ri_triggers.c
    Line: 2783
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "Products" violates foreign key constraint "FK_Products_ProductCategories_CategoryId"

DETAIL: Key (CategoryId)=(3fa85f64-5717-4562-b3fc-2c963f66afa6) is not present in table "ProductCategories".
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "Products" violates foreign key constraint "FK_Products_ProductCategories_CategoryId"
    Detail: Key (CategoryId)=(3fa85f64-5717-4562-b3fc-2c963f66afa6) is not present in table "ProductCategories".
    SchemaName: public
    TableName: Products
    ConstraintName: FK_Products_ProductCategories_CategoryId
    File: ri_triggers.c
    Line: 2783
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-29 21:10:40.523 +05:30 [ERR] Error creating product
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "Products" violates foreign key constraint "FK_Products_ProductCategories_CategoryId"

DETAIL: Key (CategoryId)=(3fa85f64-5717-4562-b3fc-2c963f66afa6) is not present in table "ProductCategories".
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "Products" violates foreign key constraint "FK_Products_ProductCategories_CategoryId"
    Detail: Key (CategoryId)=(3fa85f64-5717-4562-b3fc-2c963f66afa6) is not present in table "ProductCategories".
    SchemaName: public
    TableName: Products
    ConstraintName: FK_Products_ProductCategories_CategoryId
    File: ri_triggers.c
    Line: 2783
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Flowtap_Infrastructure.Repositories.ProductRepository.CreateAsync(Product product, CancellationToken cancellationToken) in D:\Git\demo-Back-End\Flowtap_Infrastructure\Repositories\ProductRepository.cs:line 88
   at Flowtap_Application.Services.ProductService.CreateProductAsync(CreateProductRequestDto request) in D:\Git\demo-Back-End\Flowtap_Application\Services\ProductService.cs:line 61
   at Flowtap_Presentation.Controllers.ProductsController.CreateProduct(CreateProductRequestDto request) in D:\Git\demo-Back-End\Flowtap_Presentation\Controllers\ProductsController.cs:line 106
2025-11-29 21:10:40.653 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Flowtap_Application.DtoModel.ApiResponseDto`1[[Flowtap_Application.DtoModel.Response.ProductResponseDto, Flowtap_Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 21:10:40.686 +05:30 [INF] Executed action Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation) in 1189.5211ms
2025-11-29 21:10:40.690 +05:30 [INF] Executed endpoint 'Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation)'
2025-11-29 21:10:40.692 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5113/api/Products - 400 null application/json; charset=utf-8 1421.018ms
2025-11-29 21:11:15.861 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5113/api/ProductCategories - null null
2025-11-29 21:11:15.867 +05:30 [INF] Executing endpoint 'Flowtap_Presentation.Controllers.ProductCategoriesController.GetAllProductCategories (Flowtap_Presentation)'
2025-11-29 21:11:15.879 +05:30 [INF] Route matched with {action = "GetAllProductCategories", controller = "ProductCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Flowtap_Application.DtoModel.ApiResponseDto`1[System.Collections.Generic.IEnumerable`1[Flowtap_Application.DtoModel.Response.ProductCategoryResponseDto]]]] GetAllProductCategories() on controller Flowtap_Presentation.Controllers.ProductCategoriesController (Flowtap_Presentation).
2025-11-29 21:11:16.059 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='9e4c1d17-14c1-4e4e-81d1-17bd0657fde2'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AppUserId", u."CreatedAt", u."Email", u."EmailVerificationToken", u."EmailVerificationTokenExpiry", u."EmployeeId", u."ExternalProvider", u."ExternalProviderId", u."IsActive", u."IsEmailVerified", u."LastLoginAt", u."PasswordHash", u."PasswordSalt", u."TwoFactorEnabled", u."UpdatedAt", u."UserType", u."Username"
FROM "UserAccounts" AS u
WHERE u."Id" = @__id_0
LIMIT 1
2025-11-29 21:11:16.072 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='e60b7257-5782-4fcd-98f2-8f2636f0c5bd'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."AccessPinHash", e."AvatarUrl", e."CanSwitchRole", e."CreatedAt", e."Email", e."EmergencyContactName", e."EmergencyContactPhone", e."EmployeeCode", e."FullName", e."HourlyRate", e."IsActive", e."LinkedAppUserId", e."Role", e."StoreId", e."UpdatedAt", e."City", e."PostalCode", e."State", e."StreetName", e."StreetNumber"
FROM "Employees" AS e
WHERE e."Id" = @__id_0
LIMIT 1
2025-11-29 21:11:16.115 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."Name", p0."Id", p0."CategoryId", p0."Name"
FROM "ProductCategories" AS p
LEFT JOIN "ProductSubCategories" AS p0 ON p."Id" = p0."CategoryId"
ORDER BY p."Id"
2025-11-29 21:11:16.133 +05:30 [INF] Executing OkObjectResult, writing value of type 'Flowtap_Application.DtoModel.ApiResponseDto`1[[System.Collections.Generic.IEnumerable`1[[Flowtap_Application.DtoModel.Response.ProductCategoryResponseDto, Flowtap_Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-29 21:11:16.141 +05:30 [INF] Executed action Flowtap_Presentation.Controllers.ProductCategoriesController.GetAllProductCategories (Flowtap_Presentation) in 253.4357ms
2025-11-29 21:11:16.145 +05:30 [INF] Executed endpoint 'Flowtap_Presentation.Controllers.ProductCategoriesController.GetAllProductCategories (Flowtap_Presentation)'
2025-11-29 21:11:16.147 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5113/api/ProductCategories - 200 null application/json; charset=utf-8 285.8051ms
2025-11-29 21:12:22.195 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5113/api/Suppliers - application/json 116
2025-11-29 21:12:22.201 +05:30 [INF] CORS policy execution successful.
2025-11-29 21:12:22.204 +05:30 [INF] Executing endpoint 'Flowtap_Presentation.Controllers.SuppliersController.CreateSupplier (Flowtap_Presentation)'
2025-11-29 21:12:22.215 +05:30 [INF] Route matched with {action = "CreateSupplier", controller = "Suppliers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Flowtap_Application.DtoModel.ApiResponseDto`1[Flowtap_Application.DtoModel.Response.SupplierResponseDto]]] CreateSupplier(Flowtap_Application.DtoModel.Request.CreateSupplierRequestDto) on controller Flowtap_Presentation.Controllers.SuppliersController (Flowtap_Presentation).
2025-11-29 21:12:22.228 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='9e4c1d17-14c1-4e4e-81d1-17bd0657fde2'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AppUserId", u."CreatedAt", u."Email", u."EmailVerificationToken", u."EmailVerificationTokenExpiry", u."EmployeeId", u."ExternalProvider", u."ExternalProviderId", u."IsActive", u."IsEmailVerified", u."LastLoginAt", u."PasswordHash", u."PasswordSalt", u."TwoFactorEnabled", u."UpdatedAt", u."UserType", u."Username"
FROM "UserAccounts" AS u
WHERE u."Id" = @__id_0
LIMIT 1
2025-11-29 21:12:22.235 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='e60b7257-5782-4fcd-98f2-8f2636f0c5bd'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."AccessPinHash", e."AvatarUrl", e."CanSwitchRole", e."CreatedAt", e."Email", e."EmergencyContactName", e."EmergencyContactPhone", e."EmployeeCode", e."FullName", e."HourlyRate", e."IsActive", e."LinkedAppUserId", e."Role", e."StoreId", e."UpdatedAt", e."City", e."PostalCode", e."State", e."StreetName", e."StreetNumber"
FROM "Employees" AS e
WHERE e."Id" = @__id_0
LIMIT 1
2025-11-29 21:12:22.271 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__name_0='string'], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."Address", s."ContactPerson", s."CreatedAt", s."Email", s."IsActive", s."Name", s."Phone", s."UpdatedAt"
FROM "Suppliers" AS s
WHERE s."Name" = @__name_0
LIMIT 1
2025-11-29 21:12:22.325 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='3aadecc5-de7f-41da-9064-b2a15b9c8eae', @p1='string', @p2='string', @p3='2025-11-29T15:42:22.2810481Z' (DbType = DateTime), @p4='string', @p5='True', @p6='string' (Nullable = false), @p7='string', @p8='2025-11-29T15:42:22.2810483Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Suppliers" ("Id", "Address", "ContactPerson", "CreatedAt", "Email", "IsActive", "Name", "Phone", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-11-29 21:12:22.334 +05:30 [INF] Created supplier "3aadecc5-de7f-41da-9064-b2a15b9c8eae"
2025-11-29 21:12:22.340 +05:30 [INF] Executing OkObjectResult, writing value of type 'Flowtap_Application.DtoModel.ApiResponseDto`1[[Flowtap_Application.DtoModel.Response.SupplierResponseDto, Flowtap_Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 21:12:22.348 +05:30 [INF] Executed action Flowtap_Presentation.Controllers.SuppliersController.CreateSupplier (Flowtap_Presentation) in 125.2996ms
2025-11-29 21:12:22.351 +05:30 [INF] Executed endpoint 'Flowtap_Presentation.Controllers.SuppliersController.CreateSupplier (Flowtap_Presentation)'
2025-11-29 21:12:22.354 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5113/api/Suppliers - 200 null application/json; charset=utf-8 158.8685ms
2025-11-29 21:13:15.213 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5113/api/Products - application/json 594
2025-11-29 21:13:15.218 +05:30 [INF] CORS policy execution successful.
2025-11-29 21:13:15.220 +05:30 [INF] Executing endpoint 'Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation)'
2025-11-29 21:13:15.231 +05:30 [INF] Route matched with {action = "CreateProduct", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Flowtap_Application.DtoModel.ApiResponseDto`1[Flowtap_Application.DtoModel.Response.ProductResponseDto]]] CreateProduct(Flowtap_Application.DtoModel.Request.CreateProductRequestDto) on controller Flowtap_Presentation.Controllers.ProductsController (Flowtap_Presentation).
2025-11-29 21:13:15.244 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='9e4c1d17-14c1-4e4e-81d1-17bd0657fde2'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AppUserId", u."CreatedAt", u."Email", u."EmailVerificationToken", u."EmailVerificationTokenExpiry", u."EmployeeId", u."ExternalProvider", u."ExternalProviderId", u."IsActive", u."IsEmailVerified", u."LastLoginAt", u."PasswordHash", u."PasswordSalt", u."TwoFactorEnabled", u."UpdatedAt", u."UserType", u."Username"
FROM "UserAccounts" AS u
WHERE u."Id" = @__id_0
LIMIT 1
2025-11-29 21:13:15.254 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='e60b7257-5782-4fcd-98f2-8f2636f0c5bd'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."AccessPinHash", e."AvatarUrl", e."CanSwitchRole", e."CreatedAt", e."Email", e."EmergencyContactName", e."EmergencyContactPhone", e."EmployeeCode", e."FullName", e."HourlyRate", e."IsActive", e."LinkedAppUserId", e."Role", e."StoreId", e."UpdatedAt", e."City", e."PostalCode", e."State", e."StreetName", e."StreetNumber"
FROM "Employees" AS e
WHERE e."Id" = @__id_0
LIMIT 1
2025-11-29 21:13:15.278 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-29 21:13:15.308 +05:30 [INF] Executed action Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation) in 71.9785ms
2025-11-29 21:13:15.312 +05:30 [INF] Executed endpoint 'Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation)'
2025-11-29 21:13:15.315 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5113/api/Products - 400 null application/problem+json; charset=utf-8 101.5597ms
2025-11-29 21:13:29.952 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5113/api/Products - application/json 647
2025-11-29 21:13:29.956 +05:30 [INF] CORS policy execution successful.
2025-11-29 21:13:29.958 +05:30 [INF] Executing endpoint 'Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation)'
2025-11-29 21:13:29.960 +05:30 [INF] Route matched with {action = "CreateProduct", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Flowtap_Application.DtoModel.ApiResponseDto`1[Flowtap_Application.DtoModel.Response.ProductResponseDto]]] CreateProduct(Flowtap_Application.DtoModel.Request.CreateProductRequestDto) on controller Flowtap_Presentation.Controllers.ProductsController (Flowtap_Presentation).
2025-11-29 21:13:29.971 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='9e4c1d17-14c1-4e4e-81d1-17bd0657fde2'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AppUserId", u."CreatedAt", u."Email", u."EmailVerificationToken", u."EmailVerificationTokenExpiry", u."EmployeeId", u."ExternalProvider", u."ExternalProviderId", u."IsActive", u."IsEmailVerified", u."LastLoginAt", u."PasswordHash", u."PasswordSalt", u."TwoFactorEnabled", u."UpdatedAt", u."UserType", u."Username"
FROM "UserAccounts" AS u
WHERE u."Id" = @__id_0
LIMIT 1
2025-11-29 21:13:29.977 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='e60b7257-5782-4fcd-98f2-8f2636f0c5bd'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."AccessPinHash", e."AvatarUrl", e."CanSwitchRole", e."CreatedAt", e."Email", e."EmergencyContactName", e."EmergencyContactPhone", e."EmployeeCode", e."FullName", e."HourlyRate", e."IsActive", e."LinkedAppUserId", e."Role", e."StoreId", e."UpdatedAt", e."City", e."PostalCode", e."State", e."StreetName", e."StreetNumber"
FROM "Employees" AS e
WHERE e."Id" = @__id_0
LIMIT 1
2025-11-29 21:13:29.993 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-29 21:13:29.997 +05:30 [INF] Executed action Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation) in 33.5629ms
2025-11-29 21:13:30.001 +05:30 [INF] Executed endpoint 'Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation)'
2025-11-29 21:13:30.003 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5113/api/Products - 400 null application/problem+json; charset=utf-8 50.7766ms
2025-11-29 21:14:00.509 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5113/api/Products - application/json 647
2025-11-29 21:14:00.514 +05:30 [INF] CORS policy execution successful.
2025-11-29 21:14:00.519 +05:30 [INF] Executing endpoint 'Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation)'
2025-11-29 21:14:00.522 +05:30 [INF] Route matched with {action = "CreateProduct", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Flowtap_Application.DtoModel.ApiResponseDto`1[Flowtap_Application.DtoModel.Response.ProductResponseDto]]] CreateProduct(Flowtap_Application.DtoModel.Request.CreateProductRequestDto) on controller Flowtap_Presentation.Controllers.ProductsController (Flowtap_Presentation).
2025-11-29 21:14:00.799 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='9e4c1d17-14c1-4e4e-81d1-17bd0657fde2'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AppUserId", u."CreatedAt", u."Email", u."EmailVerificationToken", u."EmailVerificationTokenExpiry", u."EmployeeId", u."ExternalProvider", u."ExternalProviderId", u."IsActive", u."IsEmailVerified", u."LastLoginAt", u."PasswordHash", u."PasswordSalt", u."TwoFactorEnabled", u."UpdatedAt", u."UserType", u."Username"
FROM "UserAccounts" AS u
WHERE u."Id" = @__id_0
LIMIT 1
2025-11-29 21:14:00.805 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='e60b7257-5782-4fcd-98f2-8f2636f0c5bd'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."AccessPinHash", e."AvatarUrl", e."CanSwitchRole", e."CreatedAt", e."Email", e."EmergencyContactName", e."EmergencyContactPhone", e."EmployeeCode", e."FullName", e."HourlyRate", e."IsActive", e."LinkedAppUserId", e."Role", e."StoreId", e."UpdatedAt", e."City", e."PostalCode", e."State", e."StreetName", e."StreetNumber"
FROM "Employees" AS e
WHERE e."Id" = @__id_0
LIMIT 1
2025-11-29 21:14:00.812 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-29 21:14:00.816 +05:30 [INF] Executed action Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation) in 275.2631ms
2025-11-29 21:14:00.821 +05:30 [INF] Executed endpoint 'Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation)'
2025-11-29 21:14:00.826 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5113/api/Products - 400 null application/problem+json; charset=utf-8 317.2806ms
2025-11-29 21:14:44.000 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5113/api/Products - application/json 647
2025-11-29 21:14:44.006 +05:30 [INF] CORS policy execution successful.
2025-11-29 21:14:44.021 +05:30 [INF] Executing endpoint 'Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation)'
2025-11-29 21:14:44.030 +05:30 [INF] Route matched with {action = "CreateProduct", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Flowtap_Application.DtoModel.ApiResponseDto`1[Flowtap_Application.DtoModel.Response.ProductResponseDto]]] CreateProduct(Flowtap_Application.DtoModel.Request.CreateProductRequestDto) on controller Flowtap_Presentation.Controllers.ProductsController (Flowtap_Presentation).
2025-11-29 21:14:44.047 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='9e4c1d17-14c1-4e4e-81d1-17bd0657fde2'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AppUserId", u."CreatedAt", u."Email", u."EmailVerificationToken", u."EmailVerificationTokenExpiry", u."EmployeeId", u."ExternalProvider", u."ExternalProviderId", u."IsActive", u."IsEmailVerified", u."LastLoginAt", u."PasswordHash", u."PasswordSalt", u."TwoFactorEnabled", u."UpdatedAt", u."UserType", u."Username"
FROM "UserAccounts" AS u
WHERE u."Id" = @__id_0
LIMIT 1
2025-11-29 21:14:44.053 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='e60b7257-5782-4fcd-98f2-8f2636f0c5bd'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."AccessPinHash", e."AvatarUrl", e."CanSwitchRole", e."CreatedAt", e."Email", e."EmergencyContactName", e."EmergencyContactPhone", e."EmployeeCode", e."FullName", e."HourlyRate", e."IsActive", e."LinkedAppUserId", e."Role", e."StoreId", e."UpdatedAt", e."City", e."PostalCode", e."State", e."StreetName", e."StreetNumber"
FROM "Employees" AS e
WHERE e."Id" = @__id_0
LIMIT 1
2025-11-29 21:14:44.061 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-29 21:14:44.065 +05:30 [INF] Executed action Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation) in 22.736ms
2025-11-29 21:14:44.068 +05:30 [INF] Executed endpoint 'Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation)'
2025-11-29 21:14:44.071 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5113/api/Products - 400 null application/problem+json; charset=utf-8 71.2309ms
2025-11-29 21:15:14.003 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5113/api/Products - application/json 648
2025-11-29 21:15:14.007 +05:30 [INF] CORS policy execution successful.
2025-11-29 21:15:14.009 +05:30 [INF] Executing endpoint 'Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation)'
2025-11-29 21:15:14.012 +05:30 [INF] Route matched with {action = "CreateProduct", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Flowtap_Application.DtoModel.ApiResponseDto`1[Flowtap_Application.DtoModel.Response.ProductResponseDto]]] CreateProduct(Flowtap_Application.DtoModel.Request.CreateProductRequestDto) on controller Flowtap_Presentation.Controllers.ProductsController (Flowtap_Presentation).
2025-11-29 21:15:14.018 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='9e4c1d17-14c1-4e4e-81d1-17bd0657fde2'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AppUserId", u."CreatedAt", u."Email", u."EmailVerificationToken", u."EmailVerificationTokenExpiry", u."EmployeeId", u."ExternalProvider", u."ExternalProviderId", u."IsActive", u."IsEmailVerified", u."LastLoginAt", u."PasswordHash", u."PasswordSalt", u."TwoFactorEnabled", u."UpdatedAt", u."UserType", u."Username"
FROM "UserAccounts" AS u
WHERE u."Id" = @__id_0
LIMIT 1
2025-11-29 21:15:14.028 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='e60b7257-5782-4fcd-98f2-8f2636f0c5bd'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."AccessPinHash", e."AvatarUrl", e."CanSwitchRole", e."CreatedAt", e."Email", e."EmergencyContactName", e."EmergencyContactPhone", e."EmployeeCode", e."FullName", e."HourlyRate", e."IsActive", e."LinkedAppUserId", e."Role", e."StoreId", e."UpdatedAt", e."City", e."PostalCode", e."State", e."StreetName", e."StreetNumber"
FROM "Employees" AS e
WHERE e."Id" = @__id_0
LIMIT 1
2025-11-29 21:15:14.043 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__sku_0='string'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Brand", t."CategoryId", t."Condition", t."CostPrice", t."CreatedAt", t."Description", t."InventoryValuationMethod", t."IsActive", t."MinimumPrice", t."Name", t."ProductType", t."SKU", t."SalePrice", t."ShowOnPOS", t."SubCategoryId", t."SupplierId", t."TaxClass", t."TrackSerials", t."Id0", t."Name0", t."Id1", t."CategoryId0", t."Name1", p2."Id", p2."AttributeName", p2."AttributeValue", p2."ProductId"
FROM (
    SELECT p."Id", p."Brand", p."CategoryId", p."Condition", p."CostPrice", p."CreatedAt", p."Description", p."InventoryValuationMethod", p."IsActive", p."MinimumPrice", p."Name", p."ProductType", p."SKU", p."SalePrice", p."ShowOnPOS", p."SubCategoryId", p."SupplierId", p."TaxClass", p."TrackSerials", p0."Id" AS "Id0", p0."Name" AS "Name0", p1."Id" AS "Id1", p1."CategoryId" AS "CategoryId0", p1."Name" AS "Name1"
    FROM "Products" AS p
    LEFT JOIN "ProductCategories" AS p0 ON p."CategoryId" = p0."Id"
    LEFT JOIN "ProductSubCategories" AS p1 ON p."SubCategoryId" = p1."Id"
    WHERE p."SKU" = @__sku_0
    LIMIT 1
) AS t
LEFT JOIN "ProductVariants" AS p2 ON t."Id" = p2."ProductId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-11-29 21:15:14.060 +05:30 [ERR] Failed executing DbCommand (7ms) [Parameters=[@p0='e62e6d57-cb13-48e1-9e93-e62752787a3c', @p1='string', @p2='3fa85f64-5717-4562-b3fc-2c963f66afa6' (Nullable = true), @p3='string', @p4='0', @p5='2025-11-29T15:45:14.0509170Z' (DbType = DateTime), @p6='string', @p7='string', @p8='True', @p9='0', @p10='string' (Nullable = false), @p11='0', @p12='string', @p13='0', @p14='True', @p15='3fa85f64-5717-4562-b3fc-2c963f66afa6' (Nullable = true), @p16='3aadecc5-de7f-41da-9064-b2a15b9c8eae' (Nullable = true), @p17='string', @p18='True'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Products" ("Id", "Brand", "CategoryId", "Condition", "CostPrice", "CreatedAt", "Description", "InventoryValuationMethod", "IsActive", "MinimumPrice", "Name", "ProductType", "SKU", "SalePrice", "ShowOnPOS", "SubCategoryId", "SupplierId", "TaxClass", "TrackSerials")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-11-29 21:15:14.075 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'Flowtap_Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "Products" violates foreign key constraint "FK_Products_ProductCategories_CategoryId"

DETAIL: Key (CategoryId)=(3fa85f64-5717-4562-b3fc-2c963f66afa6) is not present in table "ProductCategories".
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "Products" violates foreign key constraint "FK_Products_ProductCategories_CategoryId"
    Detail: Key (CategoryId)=(3fa85f64-5717-4562-b3fc-2c963f66afa6) is not present in table "ProductCategories".
    SchemaName: public
    TableName: Products
    ConstraintName: FK_Products_ProductCategories_CategoryId
    File: ri_triggers.c
    Line: 2783
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "Products" violates foreign key constraint "FK_Products_ProductCategories_CategoryId"

DETAIL: Key (CategoryId)=(3fa85f64-5717-4562-b3fc-2c963f66afa6) is not present in table "ProductCategories".
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "Products" violates foreign key constraint "FK_Products_ProductCategories_CategoryId"
    Detail: Key (CategoryId)=(3fa85f64-5717-4562-b3fc-2c963f66afa6) is not present in table "ProductCategories".
    SchemaName: public
    TableName: Products
    ConstraintName: FK_Products_ProductCategories_CategoryId
    File: ri_triggers.c
    Line: 2783
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-29 21:15:14.105 +05:30 [ERR] Error creating product
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "Products" violates foreign key constraint "FK_Products_ProductCategories_CategoryId"

DETAIL: Key (CategoryId)=(3fa85f64-5717-4562-b3fc-2c963f66afa6) is not present in table "ProductCategories".
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "Products" violates foreign key constraint "FK_Products_ProductCategories_CategoryId"
    Detail: Key (CategoryId)=(3fa85f64-5717-4562-b3fc-2c963f66afa6) is not present in table "ProductCategories".
    SchemaName: public
    TableName: Products
    ConstraintName: FK_Products_ProductCategories_CategoryId
    File: ri_triggers.c
    Line: 2783
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Flowtap_Infrastructure.Repositories.ProductRepository.CreateAsync(Product product, CancellationToken cancellationToken) in D:\Git\demo-Back-End\Flowtap_Infrastructure\Repositories\ProductRepository.cs:line 88
   at Flowtap_Application.Services.ProductService.CreateProductAsync(CreateProductRequestDto request) in D:\Git\demo-Back-End\Flowtap_Application\Services\ProductService.cs:line 61
   at Flowtap_Presentation.Controllers.ProductsController.CreateProduct(CreateProductRequestDto request) in D:\Git\demo-Back-End\Flowtap_Presentation\Controllers\ProductsController.cs:line 106
2025-11-29 21:15:14.128 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Flowtap_Application.DtoModel.ApiResponseDto`1[[Flowtap_Application.DtoModel.Response.ProductResponseDto, Flowtap_Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 21:15:14.130 +05:30 [INF] Executed action Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation) in 114.6462ms
2025-11-29 21:15:14.131 +05:30 [INF] Executed endpoint 'Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation)'
2025-11-29 21:15:14.133 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5113/api/Products - 400 null application/json; charset=utf-8 129.6569ms
2025-11-29 21:16:23.676 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5113/api/Products - application/json 648
2025-11-29 21:16:23.693 +05:30 [INF] CORS policy execution successful.
2025-11-29 21:16:23.711 +05:30 [INF] Executing endpoint 'Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation)'
2025-11-29 21:16:23.718 +05:30 [INF] Route matched with {action = "CreateProduct", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Flowtap_Application.DtoModel.ApiResponseDto`1[Flowtap_Application.DtoModel.Response.ProductResponseDto]]] CreateProduct(Flowtap_Application.DtoModel.Request.CreateProductRequestDto) on controller Flowtap_Presentation.Controllers.ProductsController (Flowtap_Presentation).
2025-11-29 21:16:23.727 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='9e4c1d17-14c1-4e4e-81d1-17bd0657fde2'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AppUserId", u."CreatedAt", u."Email", u."EmailVerificationToken", u."EmailVerificationTokenExpiry", u."EmployeeId", u."ExternalProvider", u."ExternalProviderId", u."IsActive", u."IsEmailVerified", u."LastLoginAt", u."PasswordHash", u."PasswordSalt", u."TwoFactorEnabled", u."UpdatedAt", u."UserType", u."Username"
FROM "UserAccounts" AS u
WHERE u."Id" = @__id_0
LIMIT 1
2025-11-29 21:16:23.735 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='e60b7257-5782-4fcd-98f2-8f2636f0c5bd'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."AccessPinHash", e."AvatarUrl", e."CanSwitchRole", e."CreatedAt", e."Email", e."EmergencyContactName", e."EmergencyContactPhone", e."EmployeeCode", e."FullName", e."HourlyRate", e."IsActive", e."LinkedAppUserId", e."Role", e."StoreId", e."UpdatedAt", e."City", e."PostalCode", e."State", e."StreetName", e."StreetNumber"
FROM "Employees" AS e
WHERE e."Id" = @__id_0
LIMIT 1
2025-11-29 21:16:23.743 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__sku_0='string'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Brand", t."CategoryId", t."Condition", t."CostPrice", t."CreatedAt", t."Description", t."InventoryValuationMethod", t."IsActive", t."MinimumPrice", t."Name", t."ProductType", t."SKU", t."SalePrice", t."ShowOnPOS", t."SubCategoryId", t."SupplierId", t."TaxClass", t."TrackSerials", t."Id0", t."Name0", t."Id1", t."CategoryId0", t."Name1", p2."Id", p2."AttributeName", p2."AttributeValue", p2."ProductId"
FROM (
    SELECT p."Id", p."Brand", p."CategoryId", p."Condition", p."CostPrice", p."CreatedAt", p."Description", p."InventoryValuationMethod", p."IsActive", p."MinimumPrice", p."Name", p."ProductType", p."SKU", p."SalePrice", p."ShowOnPOS", p."SubCategoryId", p."SupplierId", p."TaxClass", p."TrackSerials", p0."Id" AS "Id0", p0."Name" AS "Name0", p1."Id" AS "Id1", p1."CategoryId" AS "CategoryId0", p1."Name" AS "Name1"
    FROM "Products" AS p
    LEFT JOIN "ProductCategories" AS p0 ON p."CategoryId" = p0."Id"
    LEFT JOIN "ProductSubCategories" AS p1 ON p."SubCategoryId" = p1."Id"
    WHERE p."SKU" = @__sku_0
    LIMIT 1
) AS t
LEFT JOIN "ProductVariants" AS p2 ON t."Id" = p2."ProductId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-11-29 21:16:23.758 +05:30 [ERR] Failed executing DbCommand (3ms) [Parameters=[@p0='b42b0ed3-9ee1-46db-a03e-580994b3c653', @p1='string', @p2='3fa85f64-5717-4562-b3fc-2c963f66afa6' (Nullable = true), @p3='string', @p4='0', @p5='2025-11-29T15:46:23.7533746Z' (DbType = DateTime), @p6='string', @p7='string', @p8='True', @p9='0', @p10='string' (Nullable = false), @p11='0', @p12='string', @p13='0', @p14='True', @p15='3fa85f64-5717-4562-b3fc-2c963f66afa6' (Nullable = true), @p16='3aadecc5-de7f-41da-9064-b2a15b9c8eae' (Nullable = true), @p17='string', @p18='True'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Products" ("Id", "Brand", "CategoryId", "Condition", "CostPrice", "CreatedAt", "Description", "InventoryValuationMethod", "IsActive", "MinimumPrice", "Name", "ProductType", "SKU", "SalePrice", "ShowOnPOS", "SubCategoryId", "SupplierId", "TaxClass", "TrackSerials")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-11-29 21:16:23.767 +05:30 [ERR] An exception occurred in the database while saving changes for context type 'Flowtap_Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "Products" violates foreign key constraint "FK_Products_ProductCategories_CategoryId"

DETAIL: Key (CategoryId)=(3fa85f64-5717-4562-b3fc-2c963f66afa6) is not present in table "ProductCategories".
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "Products" violates foreign key constraint "FK_Products_ProductCategories_CategoryId"
    Detail: Key (CategoryId)=(3fa85f64-5717-4562-b3fc-2c963f66afa6) is not present in table "ProductCategories".
    SchemaName: public
    TableName: Products
    ConstraintName: FK_Products_ProductCategories_CategoryId
    File: ri_triggers.c
    Line: 2783
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "Products" violates foreign key constraint "FK_Products_ProductCategories_CategoryId"

DETAIL: Key (CategoryId)=(3fa85f64-5717-4562-b3fc-2c963f66afa6) is not present in table "ProductCategories".
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "Products" violates foreign key constraint "FK_Products_ProductCategories_CategoryId"
    Detail: Key (CategoryId)=(3fa85f64-5717-4562-b3fc-2c963f66afa6) is not present in table "ProductCategories".
    SchemaName: public
    TableName: Products
    ConstraintName: FK_Products_ProductCategories_CategoryId
    File: ri_triggers.c
    Line: 2783
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-29 21:16:23.797 +05:30 [ERR] Error creating product
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "Products" violates foreign key constraint "FK_Products_ProductCategories_CategoryId"

DETAIL: Key (CategoryId)=(3fa85f64-5717-4562-b3fc-2c963f66afa6) is not present in table "ProductCategories".
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "Products" violates foreign key constraint "FK_Products_ProductCategories_CategoryId"
    Detail: Key (CategoryId)=(3fa85f64-5717-4562-b3fc-2c963f66afa6) is not present in table "ProductCategories".
    SchemaName: public
    TableName: Products
    ConstraintName: FK_Products_ProductCategories_CategoryId
    File: ri_triggers.c
    Line: 2783
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Flowtap_Infrastructure.Repositories.ProductRepository.CreateAsync(Product product, CancellationToken cancellationToken) in D:\Git\demo-Back-End\Flowtap_Infrastructure\Repositories\ProductRepository.cs:line 88
   at Flowtap_Application.Services.ProductService.CreateProductAsync(CreateProductRequestDto request) in D:\Git\demo-Back-End\Flowtap_Application\Services\ProductService.cs:line 61
   at Flowtap_Presentation.Controllers.ProductsController.CreateProduct(CreateProductRequestDto request) in D:\Git\demo-Back-End\Flowtap_Presentation\Controllers\ProductsController.cs:line 106
2025-11-29 21:16:23.822 +05:30 [INF] Executing BadRequestObjectResult, writing value of type 'Flowtap_Application.DtoModel.ApiResponseDto`1[[Flowtap_Application.DtoModel.Response.ProductResponseDto, Flowtap_Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 21:16:23.826 +05:30 [INF] Executed action Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation) in 102.8115ms
2025-11-29 21:16:23.828 +05:30 [INF] Executed endpoint 'Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation)'
2025-11-29 21:16:23.831 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5113/api/Products - 400 null application/json; charset=utf-8 154.2754ms
2025-11-29 21:17:49.939 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5113/api/ProductCategories - application/json 22
2025-11-29 21:17:49.959 +05:30 [INF] CORS policy execution successful.
2025-11-29 21:17:49.980 +05:30 [INF] Executing endpoint 'Flowtap_Presentation.Controllers.ProductCategoriesController.CreateProductCategory (Flowtap_Presentation)'
2025-11-29 21:17:50.076 +05:30 [INF] Route matched with {action = "CreateProductCategory", controller = "ProductCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Flowtap_Application.DtoModel.ApiResponseDto`1[Flowtap_Application.DtoModel.Response.ProductCategoryResponseDto]]] CreateProductCategory(Flowtap_Application.DtoModel.Request.CreateProductCategoryRequestDto) on controller Flowtap_Presentation.Controllers.ProductCategoriesController (Flowtap_Presentation).
2025-11-29 21:17:50.115 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='9e4c1d17-14c1-4e4e-81d1-17bd0657fde2'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AppUserId", u."CreatedAt", u."Email", u."EmailVerificationToken", u."EmailVerificationTokenExpiry", u."EmployeeId", u."ExternalProvider", u."ExternalProviderId", u."IsActive", u."IsEmailVerified", u."LastLoginAt", u."PasswordHash", u."PasswordSalt", u."TwoFactorEnabled", u."UpdatedAt", u."UserType", u."Username"
FROM "UserAccounts" AS u
WHERE u."Id" = @__id_0
LIMIT 1
2025-11-29 21:17:50.145 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='e60b7257-5782-4fcd-98f2-8f2636f0c5bd'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."AccessPinHash", e."AvatarUrl", e."CanSwitchRole", e."CreatedAt", e."Email", e."EmergencyContactName", e."EmergencyContactPhone", e."EmployeeCode", e."FullName", e."HourlyRate", e."IsActive", e."LinkedAppUserId", e."Role", e."StoreId", e."UpdatedAt", e."City", e."PostalCode", e."State", e."StreetName", e."StreetNumber"
FROM "Employees" AS e
WHERE e."Id" = @__id_0
LIMIT 1
2025-11-29 21:17:50.364 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__name_0='mobile'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", p0."Id", p0."CategoryId", p0."Name"
FROM (
    SELECT p."Id", p."Name"
    FROM "ProductCategories" AS p
    WHERE p."Name" = @__name_0
    LIMIT 1
) AS t
LEFT JOIN "ProductSubCategories" AS p0 ON t."Id" = p0."CategoryId"
ORDER BY t."Id"
2025-11-29 21:17:50.437 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@p0='373ec645-7439-4a13-a45d-cb9004fbcc1c', @p1='mobile' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProductCategories" ("Id", "Name")
VALUES (@p0, @p1);
2025-11-29 21:17:50.450 +05:30 [INF] Created product category "373ec645-7439-4a13-a45d-cb9004fbcc1c"
2025-11-29 21:17:50.475 +05:30 [INF] Executing OkObjectResult, writing value of type 'Flowtap_Application.DtoModel.ApiResponseDto`1[[Flowtap_Application.DtoModel.Response.ProductCategoryResponseDto, Flowtap_Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 21:17:50.506 +05:30 [INF] Executed action Flowtap_Presentation.Controllers.ProductCategoriesController.CreateProductCategory (Flowtap_Presentation) in 424.7904ms
2025-11-29 21:17:50.513 +05:30 [INF] Executed endpoint 'Flowtap_Presentation.Controllers.ProductCategoriesController.CreateProductCategory (Flowtap_Presentation)'
2025-11-29 21:17:50.516 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5113/api/ProductCategories - 200 null application/json; charset=utf-8 577.4926ms
2025-11-29 21:20:17.067 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5113/api/ProductSubCategories - application/json 79
2025-11-29 21:20:17.074 +05:30 [INF] CORS policy execution successful.
2025-11-29 21:20:17.075 +05:30 [INF] Executing endpoint 'Flowtap_Presentation.Controllers.ProductSubCategoriesController.CreateProductSubCategory (Flowtap_Presentation)'
2025-11-29 21:20:17.103 +05:30 [INF] Route matched with {action = "CreateProductSubCategory", controller = "ProductSubCategories"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Flowtap_Application.DtoModel.ApiResponseDto`1[Flowtap_Application.DtoModel.Response.ProductSubCategoryResponseDto]]] CreateProductSubCategory(Flowtap_Application.DtoModel.Request.CreateProductSubCategoryRequestDto) on controller Flowtap_Presentation.Controllers.ProductSubCategoriesController (Flowtap_Presentation).
2025-11-29 21:20:17.298 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='9e4c1d17-14c1-4e4e-81d1-17bd0657fde2'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AppUserId", u."CreatedAt", u."Email", u."EmailVerificationToken", u."EmailVerificationTokenExpiry", u."EmployeeId", u."ExternalProvider", u."ExternalProviderId", u."IsActive", u."IsEmailVerified", u."LastLoginAt", u."PasswordHash", u."PasswordSalt", u."TwoFactorEnabled", u."UpdatedAt", u."UserType", u."Username"
FROM "UserAccounts" AS u
WHERE u."Id" = @__id_0
LIMIT 1
2025-11-29 21:20:17.305 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='e60b7257-5782-4fcd-98f2-8f2636f0c5bd'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."AccessPinHash", e."AvatarUrl", e."CanSwitchRole", e."CreatedAt", e."Email", e."EmergencyContactName", e."EmergencyContactPhone", e."EmployeeCode", e."FullName", e."HourlyRate", e."IsActive", e."LinkedAppUserId", e."Role", e."StoreId", e."UpdatedAt", e."City", e."PostalCode", e."State", e."StreetName", e."StreetNumber"
FROM "Employees" AS e
WHERE e."Id" = @__id_0
LIMIT 1
2025-11-29 21:20:17.349 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='373ec645-7439-4a13-a45d-cb9004fbcc1c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", p0."Id", p0."CategoryId", p0."Name"
FROM (
    SELECT p."Id", p."Name"
    FROM "ProductCategories" AS p
    WHERE p."Id" = @__id_0
    LIMIT 1
) AS t
LEFT JOIN "ProductSubCategories" AS p0 ON t."Id" = p0."CategoryId"
ORDER BY t."Id"
2025-11-29 21:20:17.414 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='8707898d-1aee-473b-a9e2-38811587c88e', @p1='373ec645-7439-4a13-a45d-cb9004fbcc1c', @p2='handset' (Nullable = false)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ProductSubCategories" ("Id", "CategoryId", "Name")
VALUES (@p0, @p1, @p2);
2025-11-29 21:20:17.422 +05:30 [INF] Created product subcategory "8707898d-1aee-473b-a9e2-38811587c88e"
2025-11-29 21:20:17.427 +05:30 [INF] Executing OkObjectResult, writing value of type 'Flowtap_Application.DtoModel.ApiResponseDto`1[[Flowtap_Application.DtoModel.Response.ProductSubCategoryResponseDto, Flowtap_Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 21:20:17.434 +05:30 [INF] Executed action Flowtap_Presentation.Controllers.ProductSubCategoriesController.CreateProductSubCategory (Flowtap_Presentation) in 323.3376ms
2025-11-29 21:20:17.436 +05:30 [INF] Executed endpoint 'Flowtap_Presentation.Controllers.ProductSubCategoriesController.CreateProductSubCategory (Flowtap_Presentation)'
2025-11-29 21:20:17.438 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5113/api/ProductSubCategories - 200 null application/json; charset=utf-8 370.4772ms
2025-11-29 21:20:43.683 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5113/api/Products - application/json 648
2025-11-29 21:20:43.692 +05:30 [INF] CORS policy execution successful.
2025-11-29 21:20:43.697 +05:30 [INF] Executing endpoint 'Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation)'
2025-11-29 21:20:43.701 +05:30 [INF] Route matched with {action = "CreateProduct", controller = "Products"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[Flowtap_Application.DtoModel.ApiResponseDto`1[Flowtap_Application.DtoModel.Response.ProductResponseDto]]] CreateProduct(Flowtap_Application.DtoModel.Request.CreateProductRequestDto) on controller Flowtap_Presentation.Controllers.ProductsController (Flowtap_Presentation).
2025-11-29 21:20:43.709 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='9e4c1d17-14c1-4e4e-81d1-17bd0657fde2'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."AppUserId", u."CreatedAt", u."Email", u."EmailVerificationToken", u."EmailVerificationTokenExpiry", u."EmployeeId", u."ExternalProvider", u."ExternalProviderId", u."IsActive", u."IsEmailVerified", u."LastLoginAt", u."PasswordHash", u."PasswordSalt", u."TwoFactorEnabled", u."UpdatedAt", u."UserType", u."Username"
FROM "UserAccounts" AS u
WHERE u."Id" = @__id_0
LIMIT 1
2025-11-29 21:20:43.714 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='e60b7257-5782-4fcd-98f2-8f2636f0c5bd'], CommandType='"Text"', CommandTimeout='30']
SELECT e."Id", e."AccessPinHash", e."AvatarUrl", e."CanSwitchRole", e."CreatedAt", e."Email", e."EmergencyContactName", e."EmergencyContactPhone", e."EmployeeCode", e."FullName", e."HourlyRate", e."IsActive", e."LinkedAppUserId", e."Role", e."StoreId", e."UpdatedAt", e."City", e."PostalCode", e."State", e."StreetName", e."StreetNumber"
FROM "Employees" AS e
WHERE e."Id" = @__id_0
LIMIT 1
2025-11-29 21:20:43.732 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__sku_0='string'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Brand", t."CategoryId", t."Condition", t."CostPrice", t."CreatedAt", t."Description", t."InventoryValuationMethod", t."IsActive", t."MinimumPrice", t."Name", t."ProductType", t."SKU", t."SalePrice", t."ShowOnPOS", t."SubCategoryId", t."SupplierId", t."TaxClass", t."TrackSerials", t."Id0", t."Name0", t."Id1", t."CategoryId0", t."Name1", p2."Id", p2."AttributeName", p2."AttributeValue", p2."ProductId"
FROM (
    SELECT p."Id", p."Brand", p."CategoryId", p."Condition", p."CostPrice", p."CreatedAt", p."Description", p."InventoryValuationMethod", p."IsActive", p."MinimumPrice", p."Name", p."ProductType", p."SKU", p."SalePrice", p."ShowOnPOS", p."SubCategoryId", p."SupplierId", p."TaxClass", p."TrackSerials", p0."Id" AS "Id0", p0."Name" AS "Name0", p1."Id" AS "Id1", p1."CategoryId" AS "CategoryId0", p1."Name" AS "Name1"
    FROM "Products" AS p
    LEFT JOIN "ProductCategories" AS p0 ON p."CategoryId" = p0."Id"
    LEFT JOIN "ProductSubCategories" AS p1 ON p."SubCategoryId" = p1."Id"
    WHERE p."SKU" = @__sku_0
    LIMIT 1
) AS t
LEFT JOIN "ProductVariants" AS p2 ON t."Id" = p2."ProductId"
ORDER BY t."Id", t."Id0", t."Id1"
2025-11-29 21:20:43.749 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@p0='e12d9fa1-6a55-4d93-9746-0ebeb928b1c8', @p1='string', @p2='373ec645-7439-4a13-a45d-cb9004fbcc1c' (Nullable = true), @p3='string', @p4='0', @p5='2025-11-29T15:50:43.7382911Z' (DbType = DateTime), @p6='string', @p7='string', @p8='True', @p9='0', @p10='string' (Nullable = false), @p11='0', @p12='string', @p13='0', @p14='True', @p15='8707898d-1aee-473b-a9e2-38811587c88e' (Nullable = true), @p16='3aadecc5-de7f-41da-9064-b2a15b9c8eae' (Nullable = true), @p17='string', @p18='True'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Products" ("Id", "Brand", "CategoryId", "Condition", "CostPrice", "CreatedAt", "Description", "InventoryValuationMethod", "IsActive", "MinimumPrice", "Name", "ProductType", "SKU", "SalePrice", "ShowOnPOS", "SubCategoryId", "SupplierId", "TaxClass", "TrackSerials")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);
2025-11-29 21:20:43.761 +05:30 [INF] Created product "e12d9fa1-6a55-4d93-9746-0ebeb928b1c8"
2025-11-29 21:20:43.865 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='7b0b0f00-c5d3-4587-a45d-3697e28b9995'], CommandType='"Text"', CommandTimeout='30']
SELECT s."Id", s."AppUserId", s."CreatedAt", s."EmployeeIds", s."Phone", s."StoreCategory", s."StoreName", s."StoreType", s."UpdatedAt", s."City", s."PostalCode", s."State", s."StreetName", s."StreetNumber", s0."Id", s0."AccountingMethod", s0."AlternateName", s0."ApiKey", s0."ApiKeyCreatedAt", s0."BusinessHoursJson", s0."ChargeDepositOnRepairs", s0."ChargeRestockingFee", s0."ChargeSalesTax", s0."CompanyEmail", s0."CompanyEmailVerified", s0."CreatedAt", s0."DecimalFormat", s0."DefaultCurrency", s0."DefaultTaxClass", s0."DiagnosticBenchFee", s0."EmailNotifications", s0."EnableInventory", s0."EnablePOS", s0."EndTime", s0."Language", s0."LockScreenTimeoutMinutes", s0."Mobile", s0."PriceFormat", s0."RegistrationNumber", s0."RequireTwoFactorForAllUsers", s0."StartTime", s0."StoreEmail", s0."StoreId", s0."StoreLogoUrl", s0."TaxPercentage", s0."TimeFormat", s0."TimeZone", s0."UpdatedAt", s0."Website", s0."DefaultAddress_City", s0."DefaultAddress_PostalCode", s0."DefaultAddress_State", s0."DefaultAddress_StreetName", s0."DefaultAddress_StreetNumber"
FROM "Stores" AS s
LEFT JOIN "StoreSettings" AS s0 ON s."Id" = s0."StoreId"
WHERE s."Id" = @__id_0
LIMIT 1
2025-11-29 21:20:44.159 +05:30 [INF] Executed DbCommand (9ms) [Parameters=[@__productId_0='e12d9fa1-6a55-4d93-9746-0ebeb928b1c8', @__storeId_1='7b0b0f00-c5d3-4587-a45d-3697e28b9995'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."Location", i."ProductId", i."QuantityOnHand", i."QuantityReserved", i."ReorderLevel", i."StoreId", i."UpdatedAt", p."Id", p."Brand", p."CategoryId", p."Condition", p."CostPrice", p."CreatedAt", p."Description", p."InventoryValuationMethod", p."IsActive", p."MinimumPrice", p."Name", p."ProductType", p."SKU", p."SalePrice", p."ShowOnPOS", p."SubCategoryId", p."SupplierId", p."TaxClass", p."TrackSerials"
FROM "InventoryItems" AS i
INNER JOIN "Products" AS p ON i."ProductId" = p."Id"
WHERE i."ProductId" = @__productId_0 AND i."StoreId" = @__storeId_1
LIMIT 1
2025-11-29 21:20:44.263 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@p0='c0febbcf-4e17-4baa-b2db-eee979303dcf', @p1=NULL, @p2='e12d9fa1-6a55-4d93-9746-0ebeb928b1c8', @p3='1', @p4='0', @p5='1', @p6='7b0b0f00-c5d3-4587-a45d-3697e28b9995', @p7='2025-11-29T15:50:44.1678874Z' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "InventoryItems" ("Id", "Location", "ProductId", "QuantityOnHand", "QuantityReserved", "ReorderLevel", "StoreId", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-11-29 21:20:44.270 +05:30 [INF] Created inventory item for product "e12d9fa1-6a55-4d93-9746-0ebeb928b1c8" in store "7b0b0f00-c5d3-4587-a45d-3697e28b9995"
2025-11-29 21:20:44.290 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='373ec645-7439-4a13-a45d-cb9004fbcc1c'], CommandType='"Text"', CommandTimeout='30']
SELECT t."Id", t."Name", p0."Id", p0."CategoryId", p0."Name"
FROM (
    SELECT p."Id", p."Name"
    FROM "ProductCategories" AS p
    WHERE p."Id" = @__id_0
    LIMIT 1
) AS t
LEFT JOIN "ProductSubCategories" AS p0 ON t."Id" = p0."CategoryId"
ORDER BY t."Id"
2025-11-29 21:20:44.315 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='8707898d-1aee-473b-a9e2-38811587c88e'], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."CategoryId", p."Name", p0."Id", p0."Name"
FROM "ProductSubCategories" AS p
INNER JOIN "ProductCategories" AS p0 ON p."CategoryId" = p0."Id"
WHERE p."Id" = @__id_0
LIMIT 1
2025-11-29 21:20:44.348 +05:30 [INF] Executed DbCommand (1ms) [Parameters=[@__productId_0='e12d9fa1-6a55-4d93-9746-0ebeb928b1c8'], CommandType='"Text"', CommandTimeout='30']
SELECT i."Id", i."Location", i."ProductId", i."QuantityOnHand", i."QuantityReserved", i."ReorderLevel", i."StoreId", i."UpdatedAt", p."Id", p."Brand", p."CategoryId", p."Condition", p."CostPrice", p."CreatedAt", p."Description", p."InventoryValuationMethod", p."IsActive", p."MinimumPrice", p."Name", p."ProductType", p."SKU", p."SalePrice", p."ShowOnPOS", p."SubCategoryId", p."SupplierId", p."TaxClass", p."TrackSerials"
FROM "InventoryItems" AS i
INNER JOIN "Products" AS p ON i."ProductId" = p."Id"
WHERE i."ProductId" = @__productId_0
2025-11-29 21:20:44.361 +05:30 [INF] Executing OkObjectResult, writing value of type 'Flowtap_Application.DtoModel.ApiResponseDto`1[[Flowtap_Application.DtoModel.Response.ProductResponseDto, Flowtap_Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-29 21:20:44.379 +05:30 [INF] Executed action Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation) in 673.816ms
2025-11-29 21:20:44.380 +05:30 [INF] Executed endpoint 'Flowtap_Presentation.Controllers.ProductsController.CreateProduct (Flowtap_Presentation)'
2025-11-29 21:20:44.382 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5113/api/Products - 200 null application/json; charset=utf-8 699.3326ms
2025-11-29 21:22:20.412 +05:30 [INF] Application is shutting down...
